<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Apex Auto Pros - Add Tip</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            -webkit-tap-highlight-color: transparent;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-sizing: border-box;
        }
        h1, h2 {
            margin: 0 0 20px 0;
            color: #1c1c1e;
        }
        .total-display {
            font-size: 2.5em;
            font-weight: bold;
            color: #000;
            margin-bottom: 25px;
        }
        .button-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }
        .button {
            background-color: #007aff;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 20px 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .button:active {
            background-color: #0056b3;
        }
        .button.full-width {
            grid-column: 1 / -1;
        }
        .percentage {
            font-size: 1.4em;
            margin-bottom: 5px;
        }
        .amount {
            font-size: 0.9em;
            opacity: 0.8;
        }
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
        }
        input[type="number"] {
            font-size: 2em;
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            text-align: center;
            border: 2px solid #ccc;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .set-total-btn {
            width: 100%;
            padding: 20px;
            font-size: 1.2em;
        }
        #qr-code-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        .qr-code-box {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .qr-code-box canvas, .qr-code-box img {
            border: 1px solid #eee;
        }
        .qr-code-box p {
            margin-top: 10px;
            font-weight: 600;
            color: #333;
        }
        #final-total-display {
            font-size: 2em;
            font-weight: bold;
        }
        #back-button {
            margin-top: 20px;
            background-color: #6c757d;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- HTML Content -->
        <div id="input-screen" class="screen active">
            <h1>Enter Invoice Total</h1>
            <input type="number" id="invoice-total-input" placeholder="e.g., 542.50" step="0.01" inputmode="decimal">
            <button id="set-total-btn" class="button set-total-btn">Set Total & Show Customer</button>
        </div>
        <div id="tip-screen" class="screen">
            <div id="total-display" class="total-display">$0.00</div>
            <h2>Add a tip?</h2>
            <div id="tip-button-container" class="button-grid">
                <button class="button" data-tip="0.15"><div class="percentage">15%</div><div class="amount" id="tip-15-amount">$0.00</div></button>
                <button class="button" data-tip="0.20"><div class="percentage">20%</div><div class="amount" id="tip-20-amount">$0.00</div></button>
                <button class="button" data-tip="0.25"><div class="percentage">25%</div><div class="amount" id="tip-25-amount">$0.00</div></button>
                <button class="button full-width" data-tip="custom">Custom</button>
                <button class="button full-width" style="background-color:#555;" data-tip="0">No tip</button>
            </div>
        </div>
        <div id="qr-screen" class="screen">
            <h2>Scan to Pay</h2>
            <div id="final-total-display">$0.00</div>
            <div id="qr-code-container"></div>
            <button id="back-button" class="button full-width">Start New Payment</button>
        </div>
    </div>

    <!-- 1. EMBEDDED QR CODE LIBRARY (The full library is placed here first) -->
    <script type="text/javascript">var QRCode;!function(){function t(t){this.mode=l.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var i=this.data.charCodeAt(e);i>65536?this.parsedData.push(240|(1835008&i)>>>18,128|(258048&i)>>>12,128|(4032&i)>>>6,128|63&i):i>2048?this.parsedData.push(224|(61440&i)>>>12,128|(4032&i)>>>6,128|63&i):i>128?this.parsedData.push(192|(1984&i)>>>6,128|63&i):this.parsedData.push(i)}}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var i=0;i<t.length-r;i++)this.num[i]=t[i+r]}function i(t,e){this.totalCount=t,this.dataCount=e}function n(){this.buffer=[],this.length=0}function o(){}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[i][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(r>=0&&r<=6&&(0==i||6==i)||i>=0&&i<=6&&(0==r||6==r)||r>=2&&r<=4&&i>=2&&i<=4?this.modules[t+r][e+i]=!0:this.modules[t+r][e+i]=!1)},getBestMaskPattern:function(){for(var t=0,r=0,i=0;i<8;i++){this.makeImpl(!0,i);var n=u.getLostPoint(this);(0==i||t>n)&&(t=n,r=i)}return r},createMovieClip:function(t,e,r){},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=u.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var i=t[e],n=t[r];if(null==this.modules[i][n])for(var o=-2;o<=2;o++)for(var a=-2;a<=2;a++)-2==o||2==o||-2==a||2==a||0==o&&0==a?this.modules[i+o][n+a]=!0:this.modules[i+o][n+a]=!1}},setupTypeNumber:function(t){for(var e=u.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var i=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=i}for(var r=0;r<18;r++){var i=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=i}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,i=u.getBCHTypeInfo(r),n=0;n<15;n++){var o=!t&&1==(i>>n&1);n<6?this.modules[n][8]=o:n<8?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(var n=0;n<15;n++){var o=!t&&1==(i>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=o:n<9?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,i=this.moduleCount-1,n=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[i][a-s]){var h=!1;o<t.length&&(h=1==(t[o]>>>n&1));u.getMask(e,i,a-s)&&(h=!h),this.modules[i][a-s]=h,n--,-1==n&&(o++,n=7)}if((i+=r)<0||this.moduleCount<=i){i-=r,r=-r;break}}}},e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,57,36,4,58,37],[4,43,19,4,44,20],[4,24,15,2,25,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[17,42,14,2,43,15],[9,141,113,3,142,114],[3,70,44,13,71,45],[15,54,24,5,55,25],[15,45,15,10,46,16],[17,132,106],[17,74,46],[29,50,22],[25,42,14,6,43,15],[13,140,112,3,141,113],[2,73,45,17,74,46],[4,54,24,23,55,25],[13,45,15,17,46,16],[17,148,118,2,149,119],[13,73,45,6,74,46],[2,54,24,28,55,25],[3,45,15,29,46,16],[7,139,111,11,140,112],[17,75,47],[21,54,24,7,55,25],[19,45,15,13,46,16],[5,138,110,13,139,111],[1,75,47,25,76,48],[15,54,24,15,55,25],[2,45,15,34,46,16],[13,146,118,6,147,119],[13,74,46,12,75,47],[7,54,24,28,55,25],[22,45,15,21,46,16],[3,137,109,19,138,110],[1,74,46,29,75,47],[15,53,23,20,54,24],[4,45,15,35,46,16],[19,145,115,6,146,116],[15,75,47,10,76,48],[19,54,24,15,55,25],[15,45,15,28,46,16],[19,151,121,4,152,122],[17,75,47,10,76,48],[19,55,25,16,56,26],[2,45,15,38,46,16],[19,147,117,10,148,118],[18,75,47,10,76,48],[13,55,25,26,56,26],[14,45,15,32,46,16],[1,145,115,29,146,116],[6,75,47,34,76,48],[2,54,24,46,55,25],[4,45,15,44,46,16],[12,151,121,12,152,122],[30,75,47,4,76,48],[22,55,25,8,56,26],[8,45,15,43,46,16],[8,152,122,20,153,123],[22,75,47,8,76,48],[20,55,25,16,56,26],[12,45,15,36,46,16],[3,151,121,29,152,122],[14,75,47,28,76,48],[4,55,25,44,56,26],[17,45,15,31,46,16],[11,147,117,21,148,118],[7,74,46,38,75,47],[12,55,25,28,56,26],[20,45,15,26,46,16]],e.createData=function(t,o,a){for(var s=i.getRSBlocks(t,o),h=new n,l=0;l<a.length;l++){var c=a[l];h.put(c.mode,4),h.put(c.getLength(),u.getLengthInBits(c.mode,t)),c.write(h)}for(var f=0,d=0;d<s.length;d++)f+=s[d].dataCount;if(h.getLengthInBits()>8*f)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+8*f+")");for(h.getLengthInBits()+4<=8*f&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;!(h.getLengthInBits()>=8*f);){if(h.put(236,8),h.getLengthInBits()>=8*f)break;h.put(17,8)}return e.createBytes(h,s)},e.createBytes=function(t,e){for(var i=0,n=0,o=0,a=0;a<e.length;a++){var s=e[a].dataCount,h=e[a].totalCount-s;n=Math.max(n,s),o=Math.max(o,h)}var l=new Array(e.length),c=new Array(e.length),f=0;for(a=0;a<e.length;a++){var d=e[a].dataCount,g=e[a].totalCount-d;l[a]=new Array(d),c[a]=new Array(g);for(var v=0;v<l[a].length;v++)l[a][v]=255&t.buffer[v+f];f+=d;var m=u.getErrorCorrectPolynomial(g),p=new r(l[a],m.getLength()-1),y=p.mod(m);for(v=0;v<c[a].length;v++)c[a][v]=y.num[y.num.length-1-v]}for(var w=new Array(f),b=0,v=0;v<n;v++)for(a=0;a<e.length;a++)v<l[a].length&&(w[b++]=l[a][v]);for(v=0;v<o;v++)for(a=0;a<e.length;a++)v<c[a].length&&(w[b++]=c[a][v]);return w};var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,34,64,94],[6,34,66,98],[6,30,58,86,114],[6,30,58,88,118],[6,34,62,90,122],[6,30,54,78,102,126],[6,26,50,74,98,122,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;u.getBCHDigit(e)-u.getBCHDigit(u.G15)>=0;)e^=u.G15<<u.getBCHDigit(e)-u.getBCHDigit(u.G15);return(t<<10|e)^u.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;u.getBCHDigit(e)-u.getBCHDigit(u.G18)>=0;)e^=u.G18<<u.getBCHDigit(e)-u.getBCHDigit(u.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>=1;return e},getPatternPosition:function(t){return u.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case 0:return(e+r)%2==0;case 1:return e%2==0;case 2:return r%3==0;case 3:return(e+r)%3==0;case 4:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case 5:return e*r%2+e*r%3==0;case 6:return(e*r%2+e*r%3)%2==0;case 7:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,i=0;i<e;i++)for(var n=0;n<e;n++){for(var o=0,a=t.isDark(i,n),s=-1;s<=1;s++)if(!(i+s<0||e<=i+s))for(var h=-1;h<=1;h++)n+h<0||e<=n+h||0==s&&0==h||a==t.isDark(i+s,n+h)&&o++;o>5&&(r+=3+o-5)}for(var i=0;i<e-1;i++)for(var n=0;n<e-1;n++){var l=0;t.isDark(i,n)&&l++,t.isDark(i+1,n)&&l++,t.isDark(i,n+1)&&l++,t.isDark(i+1,n+1)&&l++,(0==l||4==l)&&(r+=3)}for(var i=0;i<e;i++)for(var n=0;n<e-6;n++)t.isDark(i,n)&&!t.isDark(i,n+1)&&t.isDark(i,n+2)&&t.isDark(i,n+3)&&t.isDark(i,n+4)&&!t.isDark(i,n+5)&&t.isDark(i,n+6)&&(r+=40);for(var n=0;n<e;n++)for(var i=0;i<e-6;i++)t.isDark(i,n)&&!t.isDark(i+1,n)&&t.isDark(i+2,n)&&t.isDark(i+3,n)&&t.isDark(i+4,n)&&!t.isDark(i+5,n)&&t.isDark(i+6,n)&&(r+=40);for(var c=0,n=0;n<e;n++)for(var i=0;i<e;i++)t.isDark(i,n)&&c++;var f=Math.abs(100*c/e/e-50)/5;return r+=10*f},gexp:function(t){return u.EXP_TABLE[t]},glog:function(t){if(t<1)throw new Error("glog("+t+")");return u.LOG_TABLE[t]},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),i=0;i<t;i++)e=e.multiply(new r([1,u.gexp(i)],0));return e},getLengthInBits:function(t,e){if(e>=1&&e<10){switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:return 8;case l.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}}else if(e<27){switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}}else{if(!(e<41))throw new Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var c=0;c<8;c++)u.EXP_TABLE[c]=1<<c;for(c=8;c<256;c++)u.EXP_TABLE[c]=u.EXP_TABLE[c-4]^u.EXP_TABLE[c-5]^u.EXP_TABLE[c-6]^u.EXP_TABLE[c-8];for(c=0;c<255;c++)u.LOG_TABLE[u.EXP_TABLE[c]]=c;r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<t.getLength();n++)e[i+n]^=u.gexp(u.glog(this.get(i))+u.glog(t.get(n)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=u.glog(this.get(0))-u.glog(t.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(n=0;n<t.getLength();n++)i[n]^=u.gexp(u.glog(t.get(n))+e);return new r(i,0).mod(t)}},i.getRSBlocks=function(t,r){var i=i.getRsBlockTable(t,r);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+r);for(var n=i.length/3,o=[],a=0;a<n;a++)for(var s=i[3*a],h=i[3*a+1],l=i[3*a+2],u=0;u<s;u++)o.push(new this(h,l));return o},i.getRsBlockTable=function(t,r){switch(r){case 0:return e.RS_BLOCK_TABLE[4*(t-1)];case 1:return e.RS_BLOCK_TABLE[4*(t-1)+1];case 2:return e.RS_BLOCK_TABLE[4*(t-1)+2];case 3:return e.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},n.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-1-r&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},o.prototype.draw=function(t){var e=this._o,r=this._htOption,i=this._el,n=t.getModuleCount(),o=Math.floor(e.width/n),a=Math.floor(e.height/n),s=Math.round((e.width-n*o)/2),h=Math.round((e.height-n*a)/2);this._htOption.width=e.width,this._htOption.height=e.height;for(var l=0;l<n;l++)for(var u=0;u<n;u++){var c=t.isDark(l,u),f=s+u*o,d=h+l*a,g=document.createElement("div");g.style.width=o+"px",g.style.height=a+"px",g.style.position="absolute",g.style.left=f+"px",g.style.top=d+"px",g.style.backgroundColor=c?e.color:e.background,i.appendChild(g)}},o.prototype.clear=function(){var t=this._el.childNodes;for(var e=t.length-1;e>=0;e--)this._el.removeChild(t[e])},o.prototype.makeCode=function(t){this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this.draw(this._oQRCode)};var f=function(t,e){"string"==typeof t&&(t=document.getElementById(t)),this._htOption=e,this._el=t,this._oQRCode=null,this.makeCode(this._htOption.text)},a={};f.prototype.makeCode=function(t){this._oQRCode=new e(this._getTypeNumber(t),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this.clear(),this.draw()},f.prototype.draw=function(){var t=this._htOption,e=this._el,r=this._oQRCode.getModuleCount(),i=Math.floor(t.width/r),n=Math.floor(t.height/r),s=document.createElement("table");s.style.width="100%",s.style.height="100%",s.style.border="0",s.style.borderCollapse="collapse",s.style.backgroundColor=t.background;for(var h=0;h<r;h++){var l=document.createElement("tr");l.style.height=n+"px";for(var u=0;u<r;u++){var c=document.createElement("td");c.style.width=i+"px",c.style.backgroundColor=this._oQRCode.isDark(h,u)?t.color:t.background,l.appendChild(c)}s.appendChild(l)}e
